{% load i18n djmoney wagtailimages_tags %}
{% image_url product.image "width-500" as image_url %}
<div class="product-card-square" data-id="{{ product.id }}"
     {% if product.image %}style="background-image: url('{{ image_url }}'); box-shadow: inset 0 0 0 200px rgba(33, 33, 33, 0.7), 0px 7px 9px -1px rgba(0, 0, 0, 0.55);"{% endif %}>
    <div class="card-text no-select">
        <div class="product-name">
            <h3>{{ product.name }}</h3>
            <h4>{{ product.amount }}</h4>
        </div>
        {{ product.short_description | safe }}
    </div>
    <span class="price">{% money_localize product.price %}</span>
    <br/><br/>
    {% if product.external_url %}
        <a href="{{ product.external_url }}" target="_blank" rel="noopener"
           class="card-cta">{% trans "Buy Now" %}</a>
    {% elif settings.shop.ShopSettings.shop_enabled %}
        <button hx-post="{% url 'shop:add_to_cart' %}" hx-target='#cart'
                hx-vals='{"item": {{ product.pk }}}'
                class="card-cta add-to-cart">{% trans "Add To Cart" %}</button>
    {% endif %}
</div>