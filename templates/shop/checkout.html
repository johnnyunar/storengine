{% extends "base.html" %}
{% load static i18n l10n djmoney storengine wagtailimages_tags %}
{% block title %}{% trans 'Checkout' %}{% endblock %}

{% block content %}
    <section id="checkout">
        {% comment %}
        <div class="steps-container">
            <a href="{% url 'shop:service_order_step_1' view.kwargs.pk %}" class="step">1</a>
            <span class="step-divider">---------</span>
            <a href="{% url 'shop:service_order_step_2' view.kwargs.pk %}" class="step active">2</a>
        </div>
        {% endcomment %}
        <div class="flex-section align-items-start">
            <div id="billing-address" class="oder-lg-0 order-1">
                <h2>{% trans 'Billing Address' %}</h2>
                <hr/>
                <form action="" method="post" id="billing-address-form">
                    {% csrf_token %}
                    {{ form }}
                    <input class="cta center" type="submit" name="pay_now" value="{% trans "Buy now" %}"/>
                    <input class="cta center secondary" type="submit" name="pay_later"
                           value="{% trans "Submit and pay later" %}">
                </form>
            </div>
            <div id="order-summary" class="order-lg-1 order-0">
                <h2>{% trans 'Summary' %}</h2>
                <hr/>
                {% cart as cart %}
                {% for item in cart.items.all %}
                    <div class="cart-item">
                        {% image item.product.image fill-100x100-c100 %}
                        <div class="cart-item-name col-3">
                            {{ item.product.name }}<br/>
                            {% if item.product_variant %}
                                {{ item.product.variants_name|capfirst }}: {{ item.product_variant.name }}
                            {% endif %}
                        </div>
                        <div class="cart-item-quantity-control col-2">
                            <input class="cart-item-quantity" type="text" value="{{ item.amount }}" readonly>&nbsp;
                        </div>
                        <span class="cart-item-price col-3">
                            {% money_localize item.price %}
                        </span>
                    </div>
                {% endfor %}
                <div class="cart-item total">
                    <div class="cart-item-name">{% trans "TOTAL" %}</div>
                    {% if cart %}
                        <span>{% money_localize cart.total_price %}</span>
                    {% else %}
                        <span>0</span>
                    {% endif %}
                </div>
            </div>
    </section>
{% endblock %}


